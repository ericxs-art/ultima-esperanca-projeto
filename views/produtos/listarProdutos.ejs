<%- include('../partials/header') %>

    <main class="container text-center mt-3">
        <h1>LISTA DE PRODUTOS </h1>
        <a href="/produtos/cadastrar">
            <button class="btn btn-lg btn-primary">
                <i class="bi bi-brightness-high-fill"></i>
                Cadastrar
            </button>
        </a>
        <% if (produtos && produtos.length> 0) { %>
            <table class="table table-striped table-hover align-middle mt-5">
                <thead class="table-dark">
                    <tr class="text-center">
                        <th scope="col">Id </th>
                        <th scope="col">Nome </th>
                        <th scope="col">Descrição </th>
                        <th scope="col">preço </th>
                        <th scope="col">Quantidade </th>
                        <th scope="col">categoria </th>
                        <th scope="col">link</th>
                         <th scope="col">Ações </th>
                    </tr>
                </thead>
                <tbody>
                    <% produtos.forEach((produtos)=> { %>
                        <tr>
                            <td>
                                <%= produtos.id %>
                            </td>
                            <td>
                                <%= produtos.nome %>
                            </td>
                            <td>
                                <%= produtos.descricao %>
                            </td>
                            <td>
                                <%= produtos.preco %>
                            </td>
                            <td>
                                <%= produtos.quantidade %>
                            </td>
                            <td>
                                <%= produtos.categoria %>
                            </td>
                            <td>
                                <%= produtos.link %>
                            </td>
                            <td>
                                <a href="/produtos/<%= produtos.id %>">
                                    <button class="btn btn-sm btn-warning me-2">
                                        <i class="bi bi-pencil-square"></i>
                                        Editar
                                    </button>
                                </a>
                                 <a href="#">
                                    <button class="btn btn-sm btn-danger"
                                        onclick="confirmaExclusao('<%= produtos.id %>', '<%=produtos.nome %>')">
                                        <i class="bi bi-trash3"></i>
                                        Excluir
                                    </button>
                                </a>

                            </td>
                        </tr>
                        <% }) %>
                </tbody>
            </table>
              <% } else { %>
                <div class="alert alert-warning text-center mt-5">
                    Nenhum produto cadastrado no momento.
                </div>
                <% } %>
                 <script>
                        function confirmaExclusao(nomeProduto, id) {
                            if (confirm(`Deseja realmente excluir o Produto ${nomeProduto}`)){
                                window.location.href = ` /produtos/deletar/${id}`
                            }
                        }
                    </script>
    </main>

    <%- include('../partials/footer') %>